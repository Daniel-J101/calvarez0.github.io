<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PicBreeder-like Evolution</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin: 0;
            background-color: #f4f4f4;
        }
        header {
            width: 100%;
            background-color: #333;
            color: white;
            padding: 10px;
            text-align: center;
            margin-bottom: 20px;
        }
        header nav ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }
        header nav ul li {
            display: inline;
            margin: 0 15px;
        }
        header nav ul li a {
            color: white;
            text-decoration: none;
        }
        header nav ul li a:hover {
            text-decoration: underline;
        }
        h1 {
            margin-bottom: 20px;
        }
        .controls {
            margin-bottom: 20px;
            text-align: center;
        }
        .image-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-gap: 10px;
            max-width: 600px;
        }
        .image-container {
            position: relative;
            display: flex;
            justify-content: center;
        }
        .image-grid img {
            width: 100%;
            height: auto;
            cursor: pointer;
            border-radius: 8px;
            transition: transform 0.3s ease;
        }
        .image-grid img:hover {
            transform: scale(1.05);
        }
        #evolutionIntensity {
            appearance: none;
            width: 100px;
            height: 8px;
            background: #ccc; /* Grey color for the slider */
            border-radius: 5px;
            outline: none;
        }
        #evolutionIntensity::-webkit-slider-thumb {
            appearance: none;
            width: 15px;
            height: 15px;
            background: #555; /* Grey thumb color */
            border-radius: 50%;
            cursor: pointer;
        }
        #evolutionIntensity::-moz-range-thumb {
            width: 15px;
            height: 15px;
            background: #555;
            border-radius: 50%;
            cursor: pointer;
        }
        .description {
            max-width: 70%;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            line-height: 1.6;
            text-align: justify;
            margin-top: 10px;
        }
        .description h2 {
            color: #333;
            margin-top: 0;
        }
        
    </style>
</head>
<body>

<header>
    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="portfolio.html">Portfolio</a></li>
            <li><a href="qualifications.html">Qualifications</a></li>
            <li><a href="service.html">Service</a></li>
            <li><a href="ai-generated.html">Evolve images!</a></li>
        </ul>
    </nav>
</header>

<div class="controls">
    <label for="evolutionIntensity">Evolution Intensity: </label>
    <input type="range" id="evolutionIntensity" min="1" max="10" value="1">
    <span id="intensityValue">1</span>
</div>

<div class="image-grid" id="imageGrid">
    <!-- Images will be dynamically inserted here -->
</div>

<div class="description">
    <h2>Evolutionary Algorithm</h2>
    <p> 
        This page showcases an evolutionary algorithm created entirely by AI. Every time you click on an image, it evolves the set of images based on the one you selected. See if you can observe patterns emerging from these mutations.
    </p>
    <p>
        Experiment with different evolution intensities and watch as the images transform. This offers a glimpse into the power of evolutionary algorithms and their ability to generate novel, complex designs from simple starting points.
    </p>
</div>

<script>
// Initialize constants for image evolution
const NUM_IMAGES = 9;
const IMAGE_SIZE = 150;
let MUTATION_RATE = 0.01;  // Default mutation rate

// Evolution intensity slider
const intensitySlider = document.getElementById('evolutionIntensity');
const intensityValue = document.getElementById('intensityValue');

// Update mutation rate based on the slider value
intensitySlider.addEventListener('input', () => {
    const intensity = intensitySlider.value;
    MUTATION_RATE = intensity*10 / 100;  // Scaling intensity to match mutation rate
    intensityValue.textContent = intensity;  // Update display value
});

// Function to generate random color
function getRandomColor() {
    const letters = '0123456789ABCDEF';
    let color = '#';
    for (let i = 0; i < 6; i++) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
}

// Function to create an initial random image (random pixels)
function generateRandomImageData() {
    const canvas = document.createElement('canvas');
    canvas.width = IMAGE_SIZE;
    canvas.height = IMAGE_SIZE;
    const ctx = canvas.getContext('2d');

    const imageData = ctx.createImageData(IMAGE_SIZE, IMAGE_SIZE);
    for (let i = 0; i < imageData.data.length; i += 4) {
        imageData.data[i] = Math.random() * 255;       // Red
        imageData.data[i + 1] = Math.random() * 255;   // Green
        imageData.data[i + 2] = Math.random() * 255;   // Blue
        imageData.data[i + 3] = 255;                   // Alpha (fully opaque)
    }
    
    ctx.putImageData(imageData, 0, 0);
    return canvas.toDataURL();
}

// Function to mutate image data by randomly changing a small portion of the pixels
function mutateImageData(imageData) {
    const numPixels = imageData.data.length / 4;
    const numMutations = Math.floor(numPixels * MUTATION_RATE);

    for (let i = 0; i < numMutations; i++) {
        const randomPixelIndex = Math.floor(Math.random() * numPixels) * 4;
        imageData.data[randomPixelIndex] = Math.random() * 255;       // Mutate Red
        imageData.data[randomPixelIndex + 1] = Math.random() * 255;   // Mutate Green
        imageData.data[randomPixelIndex + 2] = Math.random() * 255;   // Mutate Blue
    }

    return imageData;
}

// Function to evolve images by mutating a parent image's data
function evolveImages(event) {
    const clickedImage = event.target;
    const canvas = document.createElement('canvas');
    canvas.width = IMAGE_SIZE;
    canvas.height = IMAGE_SIZE;
    const ctx = canvas.getContext('2d');

    const parentImage = new Image();
    parentImage.src = clickedImage.src;

    parentImage.onload = () => {
        ctx.drawImage(parentImage, 0, 0);
        let imageData = ctx.getImageData(0, 0, IMAGE_SIZE, IMAGE_SIZE);

        // Evolve new images based on the clicked image (the parent)
        populateImages(() => mutateImageData(imageData));
    };
}

// Function to populate the image grid with random or evolved images
function populateImages(mutateFunction) {
    const imageGrid = document.getElementById('imageGrid');
    imageGrid.innerHTML = ''; // Clear the grid

    for (let i = 0; i < NUM_IMAGES; i++) {
        const img = document.createElement('img');
        const imageContainer = document.createElement('div');
        imageContainer.classList.add('image-container');

        if (mutateFunction) {
            const canvas = document.createElement('canvas');
            canvas.width = IMAGE_SIZE;
            canvas.height = IMAGE_SIZE;
            const ctx = canvas.getContext('2d');

            // Get the mutated image data
            const mutatedData = mutateFunction();
            ctx.putImageData(mutatedData, 0, 0);
            img.src = canvas.toDataURL();
        } else {
            // Generate completely random images
            img.src = generateRandomImageData();
        }

        img.addEventListener('click', evolveImages); // Add click event listener
        imageContainer.appendChild(img);

        imageGrid.appendChild(imageContainer);
    }
}

// Initial population of images
populateImages();

</script>

</body>
</html>
